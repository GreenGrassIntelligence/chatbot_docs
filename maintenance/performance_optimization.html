

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Performance Optimization Guide &mdash; E-commerce Chatbot 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c30eb0f8" />

  
    <link rel="canonical" href="https://greengrassintelligence.github.io/chatbot_docs/maintenance/performance_optimization.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=51b770b3"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within E-commerce Chatbot 2.0.0 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            E-commerce Chatbot
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/documentation_setup.html">Documentation Setup Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#installation-steps">Installation Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#configuration-files">Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#github-pages-setup">GitHub Pages Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#build-process">Build Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/documentation_setup.html#maintenance">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation/application_setup.html">Application Setup Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#database-setup">Database Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#rag-system-setup">RAG System Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#environment-configuration">Environment Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#python-dependencies">Python Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#verification">Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/application_setup.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation/environment_configuration.html">Environment Configuration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#environment-variables-reference">Environment Variables Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#configuration-file-structure">Configuration File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#configuration-loading-order">Configuration Loading Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#configuration-validation">Configuration Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#environment-specific-configurations">Environment-Specific Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#configuration-management-best-practices">Configuration Management Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/environment_configuration.html#troubleshooting-configuration-issues">Troubleshooting Configuration Issues</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/getting_started.html">Getting Started Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#first-steps">First Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#product-search">Product Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#cart-management">Cart Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#product-information">Product Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#order-management">Order Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/getting_started.html#need-help">Need Help?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/user_guide.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#basic-interaction">Basic Interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#product-search">Product Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#cart-management">Cart Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#order-management">Order Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#commands-reference">Commands Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/user_guide.html#need-more-help">Need More Help?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/troubleshooting.html">Troubleshooting Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/troubleshooting.html#quick-diagnosis">Quick Diagnosis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/troubleshooting.html#common-issues-and-solutions">Common Issues and Solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/troubleshooting.html#performance-optimization">Performance Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/troubleshooting.html#debugging-steps">Debugging Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/troubleshooting.html#prevention-tips">Prevention Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/troubleshooting.html#getting-help">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/troubleshooting.html#emergency-procedures">Emergency Procedures</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/architecture_overview.html">Architecture Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/architecture_overview.html#system-architecture-diagram">System Architecture Diagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/architecture_overview.html#architecture-principles">Architecture Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/architecture_overview.html#system-characteristics">System Characteristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/architecture_overview.html#core-components-overview">Core Components Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/architecture_overview.html#data-flow">Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/architecture_overview.html#technology-stack">Technology Stack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/nlu_system.html">Natural Language Understanding (NLU) System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#intent-detection">Intent Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#entity-extraction">Entity Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#llm-integration">LLM Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#context-awareness">Context Awareness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#confidence-scoring">Confidence Scoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#clarification-detection">Clarification Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#performance-optimization">Performance Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#error-handling">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/nlu_system.html#integration-points">Integration Points</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/configuration_guide.html">Configuration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#unified-configuration-system">Unified Configuration System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#feature-toggles">Feature Toggles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#yaml-configuration">YAML Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#configuration-loading-order">Configuration Loading Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#configuration-validation">Configuration Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#environment-specific-configurations">Environment-Specific Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#runtime-configuration-updates">Runtime Configuration Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#configuration-best-practices">Configuration Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/configuration_guide.html#troubleshooting-configuration-issues">Troubleshooting Configuration Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/database_schema.html">Database Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#core-tables">Core Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#data-models">Data Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#database-relationships">Database Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#indexes">Indexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#database-manager">Database Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#data-access-layer">Data Access Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#migration-system">Migration System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/database_schema.html#performance-optimization">Performance Optimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/testing_guide.html">Testing Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#unit-testing">Unit Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#integration-testing">Integration Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#performance-testing">Performance Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#validation-testing">Validation Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#test-data-management">Test Data Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#test-execution">Test Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing_guide.html#test-best-practices">Test Best Practices</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Maintenance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="monitoring_and_logging.html">Monitoring and Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#logging-configuration">Logging Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#log-format">Log Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#logging-components">Logging Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#core-logging-components">Core Logging Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#analytics-logging">Analytics Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#monitoring-metrics">Monitoring Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#key-performance-indicators-kpis">Key Performance Indicators (KPIs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#real-time-monitoring">Real-time Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#alerting-configuration">Alerting Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#critical-alerts">Critical Alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#warning-alerts">Warning Alerts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#log-analysis-tools">Log Analysis Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#built-in-analysis">Built-in Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#external-integration">External Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#log-retention-policy">Log Retention Policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#development-environment">Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#production-environment">Production Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#log-rotation">Log Rotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#logging-guidelines">Logging Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#monitoring-guidelines">Monitoring Guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#common-logging-issues">Common Logging Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#monitoring-issues">Monitoring Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#configuration-examples">Configuration Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#id1">Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#monitoring-configuration">Monitoring Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_and_logging.html#integration-examples">Integration Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#elk-stack-integration">ELK Stack Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring_and_logging.html#prometheus-integration">Prometheus Integration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="analysis_and_improvements.html">Analysis and Improvements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#performance-analysis">Performance Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#response-time-analysis">Response Time Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#accuracy-analysis">Accuracy Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#resource-utilization">Resource Utilization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#user-behavior-analysis">User Behavior Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#interaction-patterns">Interaction Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#user-segmentation">User Segmentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#system-health-analysis">System Health Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#error-analysis">Error Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#availability-monitoring">Availability Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#improvement-strategies">Improvement Strategies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#performance-optimization">Performance Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#accuracy-improvements">Accuracy Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#user-experience-enhancements">User Experience Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#continuous-improvement-process">Continuous Improvement Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#data-collection">Data Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#analysis-framework">Analysis Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#implementation-process">Implementation Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#feedback-loop">Feedback Loop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#tools-and-technologies">Tools and Technologies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#analytics-tools">Analytics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#testing-tools">Testing Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#monitoring-tools">Monitoring Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#data-driven-decisions">Data-Driven Decisions</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#incremental-improvements">Incremental Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#user-centric-approach">User-Centric Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#continuous-learning">Continuous Learning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#metrics-and-kpis">Metrics and KPIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#key-performance-indicators">Key Performance Indicators</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#success-metrics">Success Metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_and_improvements.html#reporting-and-communication">Reporting and Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#regular-reports">Regular Reports</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#stakeholder-communication">Stakeholder Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_and_improvements.html#documentation-updates">Documentation Updates</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="improvements_summary.html">Improvements Summary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="improvements_summary.html#recent-improvements">Recent Improvements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#performance-enhancements">Performance Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#accuracy-improvements">Accuracy Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#user-experience-enhancements">User Experience Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#system-reliability">System Reliability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="improvements_summary.html#maintenance-activities">Maintenance Activities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#regular-maintenance">Regular Maintenance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="improvements_summary.html#planned-improvements">Planned Improvements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#short-term-next-3-months">Short-term (Next 3 Months)</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#medium-term-3-6-months">Medium-term (3-6 Months)</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#long-term-6-months">Long-term (6+ Months)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="improvements_summary.html#metrics-and-results">Metrics and Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#performance-metrics">Performance Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#user-satisfaction">User Satisfaction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="improvements_summary.html#lessons-learned">Lessons Learned</a><ul>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#success-factors">Success Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#challenges-overcome">Challenges Overcome</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#best-practices-established">Best Practices Established</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="improvements_summary.html#future-directions">Future Directions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#technology-trends">Technology Trends</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#user-experience-trends">User Experience Trends</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#business-alignment">Business Alignment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="improvements_summary.html#continuous-improvement">Continuous Improvement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#ongoing-processes">Ongoing Processes</a></li>
<li class="toctree-l3"><a class="reference internal" href="improvements_summary.html#success-metrics">Success Metrics</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">E-commerce Chatbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Performance Optimization Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/maintenance/performance_optimization.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="performance-optimization-guide">
<h1>Performance Optimization Guide<a class="headerlink" href="#performance-optimization-guide" title="Link to this heading">¶</a></h1>
<p>This guide provides detailed information about optimizing the performance of the e-commerce chatbot system, including database optimization, caching strategies, and monitoring.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Performance optimization is crucial for providing a responsive user experience. This guide covers various optimization techniques for different components of the system.</p>
<p><strong>Key Areas</strong>:
- Database Performance
- Caching Strategies
- Search Optimization
- LLM Response Optimization
- Memory Management
- Monitoring and Profiling</p>
</section>
<section id="database-performance-optimization">
<h2>Database Performance Optimization<a class="headerlink" href="#database-performance-optimization" title="Link to this heading">¶</a></h2>
<p><strong>Query Optimization</strong></p>
<p><strong>Index Optimization</strong></p>
<p>Ensure proper indexes are created for frequently queried columns:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Products table indexes</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">CONCURRENTLY</span><span class="w"> </span><span class="n">idx_products_name</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">CONCURRENTLY</span><span class="w"> </span><span class="n">idx_products_category_price</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">category_id</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">CONCURRENTLY</span><span class="w"> </span><span class="n">idx_products_brand_active</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span><span class="w"> </span><span class="n">is_active</span><span class="p">);</span>

<span class="c1">-- Orders table indexes</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">CONCURRENTLY</span><span class="w"> </span><span class="n">idx_orders_user_status</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">orders</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">CONCURRENTLY</span><span class="w"> </span><span class="n">idx_orders_created_at</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">orders</span><span class="p">(</span><span class="n">created_at</span><span class="p">);</span>

<span class="c1">-- Search optimization indexes</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">CONCURRENTLY</span><span class="w"> </span><span class="n">idx_products_search</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">gin</span><span class="p">(</span><span class="n">to_tsvector</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">COALESCE</span><span class="p">(</span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)));</span>
</pre></div>
</div>
<p><strong>Query Optimization Techniques</strong></p>
<ol class="arabic simple">
<li><p><strong>Use EXPLAIN ANALYZE</strong>
- Analyze query execution plans
- Identify bottlenecks
- Optimize slow queries</p></li>
</ol>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">EXPLAIN</span><span class="w"> </span><span class="k">ANALYZE</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">category_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="n">p</span>
<span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">categories</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">id</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">is_active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">price</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Avoid N+1 Queries</strong>
- Use JOINs instead of multiple queries
- Batch related queries
- Use eager loading</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bad: N+1 query problem</span>
<span class="n">products</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM products WHERE category_id = $1&quot;</span><span class="p">,</span> <span class="n">category_id</span><span class="p">)</span>
<span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
    <span class="n">category</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">fetchrow</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM categories WHERE id = $1&quot;</span><span class="p">,</span> <span class="n">product</span><span class="p">[</span><span class="s1">&#39;category_id&#39;</span><span class="p">])</span>

<span class="c1"># Good: Single query with JOIN</span>
<span class="n">products</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT p.*, c.name as category_name</span>
<span class="s2">    FROM products p</span>
<span class="s2">    LEFT JOIN categories c ON p.category_id = c.id</span>
<span class="s2">    WHERE p.category_id = $1</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">category_id</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Use Connection Pooling</strong>
- Configure appropriate pool size
- Monitor connection usage
- Handle connection timeouts</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Optimize connection pool settings</span>
<span class="n">pool_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;min_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;max_size&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s1">&#39;command_timeout&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s1">&#39;server_settings&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;application_name&#39;</span><span class="p">:</span> <span class="s1">&#39;chatbot_app&#39;</span><span class="p">,</span>
        <span class="s1">&#39;statement_timeout&#39;</span><span class="p">:</span> <span class="s1">&#39;30000&#39;</span>  <span class="c1"># 30 seconds</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Database Configuration Optimization</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- PostgreSQL configuration optimizations</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">shared_buffers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;256MB&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">effective_cache_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1GB&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">work_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;4MB&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">maintenance_work_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;64MB&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">checkpoint_completion_target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">9</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">wal_buffers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;16MB&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">default_statistics_target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">random_page_cost</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">effective_io_concurrency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="caching-strategies">
<h2>Caching Strategies<a class="headerlink" href="#caching-strategies" title="Link to this heading">¶</a></h2>
<p><strong>Multi-Level Caching</strong></p>
<p><strong>Application-Level Caching</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">lru_cache</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CacheManager</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_cache</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_ttl</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_cached_product</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cache frequently accessed products&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_product_from_db</span><span class="p">(</span><span class="n">product_id</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_cached_search_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cache search results&quot;&quot;&quot;</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;search:</span><span class="si">{</span><span class="nb">hash</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">str</span><span class="p">(</span><span class="n">filters</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">cache_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_cache</span><span class="p">:</span>
            <span class="n">cached_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_ttl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">cached_time</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>  <span class="c1"># 5 minutes TTL</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>

        <span class="c1"># Fetch from database</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_products</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>

        <span class="c1"># Cache results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_ttl</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div>
<p><strong>Redis Caching</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">redis</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">class</span><span class="w"> </span><span class="nc">RedisCache</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">redis_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redis</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">from_url</span><span class="p">(</span><span class="n">redis_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_ttl</span> <span class="o">=</span> <span class="mi">300</span>  <span class="c1"># 5 minutes</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get value from cache&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">redis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">value</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set value in cache&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ttl</span> <span class="o">=</span> <span class="n">ttl</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_ttl</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redis</span><span class="o">.</span><span class="n">setex</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">ttl</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># Fail silently</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete value from cache&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redis</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>

<span class="c1"># Usage examples</span>
<span class="n">cache</span> <span class="o">=</span> <span class="n">RedisCache</span><span class="p">(</span><span class="s2">&quot;redis://localhost:6379&quot;</span><span class="p">)</span>

<span class="c1"># Cache product data</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_product_with_cache</span><span class="p">(</span><span class="n">product_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;product:</span><span class="si">{</span><span class="n">product_id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Try cache first</span>
    <span class="n">cached_product</span> <span class="o">=</span> <span class="k">await</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_product</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cached_product</span>

    <span class="c1"># Fetch from database</span>
    <span class="n">product</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch_product_from_db</span><span class="p">(</span><span class="n">product_id</span><span class="p">)</span>

    <span class="c1"># Cache for 10 minutes</span>
    <span class="k">await</span> <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">product</span>
</pre></div>
</div>
<p><strong>Cache Invalidation Strategies</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CacheInvalidationManager</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="n">RedisCache</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invalidate_product_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalidate product-related cache&quot;&quot;&quot;</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;product:</span><span class="si">{</span><span class="n">product_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;search:*&quot;</span><span class="p">,</span>  <span class="c1"># Invalidate all search results</span>
            <span class="sa">f</span><span class="s2">&quot;category:*&quot;</span>  <span class="c1"># Invalidate category-related cache</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">delete_pattern</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invalidate_user_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalidate user-related cache&quot;&quot;&quot;</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;user:</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;cart:</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;session:</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">delete_pattern</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="search-optimization">
<h2>Search Optimization<a class="headerlink" href="#search-optimization" title="Link to this heading">¶</a></h2>
<p><strong>Search Algorithm Optimization</strong></p>
<p><strong>Fuzzy Search Optimization</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">difflib</span><span class="w"> </span><span class="kn">import</span> <span class="n">SequenceMatcher</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>

<span class="k">class</span><span class="w"> </span><span class="nc">OptimizedFuzzyMatcher</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">fuzzy_threshold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_distance</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">max_distance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">optimized_fuzzy_search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">products</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optimized fuzzy search with caching and early termination&quot;&quot;&quot;</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;fuzzy:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">cache_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">query_lower</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
            <span class="c1"># Early termination for exact matches</span>
            <span class="k">if</span> <span class="n">query_lower</span> <span class="ow">in</span> <span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">product</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                <span class="k">continue</span>

            <span class="c1"># Calculate similarity</span>
            <span class="n">similarity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_similarity</span><span class="p">(</span><span class="n">query_lower</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

            <span class="k">if</span> <span class="n">similarity</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">:</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">product</span><span class="p">,</span> <span class="n">similarity</span><span class="p">))</span>

        <span class="c1"># Sort by similarity and limit results</span>
        <span class="n">results</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">results</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">max_results</span><span class="p">]</span>

        <span class="c1"># Cache results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">product</span> <span class="k">for</span> <span class="n">product</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optimized similarity calculation&quot;&quot;&quot;</span>
        <span class="c1"># Use faster similarity algorithms</span>
        <span class="k">return</span> <span class="n">SequenceMatcher</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span><span class="o">.</span><span class="n">ratio</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Vector Search Optimization</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">chromadb</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">chromadb.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">Settings</span>

<span class="k">class</span><span class="w"> </span><span class="nc">OptimizedVectorSearch</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">chromadb</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span>
            <span class="n">chroma_db_impl</span><span class="o">=</span><span class="s2">&quot;duckdb+parquet&quot;</span><span class="p">,</span>
            <span class="n">persist_directory</span><span class="o">=</span><span class="s2">&quot;./chroma_db&quot;</span>
        <span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_or_create_collection</span><span class="p">(</span><span class="s2">&quot;products&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">optimized_semantic_search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optimized semantic search with batching&quot;&quot;&quot;</span>
        <span class="c1"># Batch similar queries</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;semantic:</span><span class="si">{</span><span class="nb">hash</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_cache&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cache_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>

        <span class="c1"># Perform semantic search</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
            <span class="n">query_texts</span><span class="o">=</span><span class="p">[</span><span class="n">query</span><span class="p">],</span>
            <span class="n">n_results</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;metadatas&quot;</span><span class="p">,</span> <span class="s2">&quot;distances&quot;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Cache results</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_cache&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span>

        <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div>
</section>
<section id="llm-response-optimization">
<h2>LLM Response Optimization<a class="headerlink" href="#llm-response-optimization" title="Link to this heading">¶</a></h2>
<p><strong>Response Caching</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LLMResponseCache</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="n">RedisCache</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ttl</span> <span class="o">=</span> <span class="mi">3600</span>  <span class="c1"># 1 hour</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_cached_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get cached LLM response&quot;&quot;&quot;</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;llm:</span><span class="si">{</span><span class="nb">hash</span><span class="p">(</span><span class="n">prompt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cache_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cache LLM response&quot;&quot;&quot;</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;llm:</span><span class="si">{</span><span class="nb">hash</span><span class="p">(</span><span class="n">prompt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ttl</span><span class="p">)</span>

<span class="c1"># Usage in LLM core</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OptimizedLLMCore</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="n">LLMResponseCache</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># Check cache first</span>
        <span class="n">cached_response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get_cached_response</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cached_response</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cached_response</span>

        <span class="c1"># Get response from LLM</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_llm_api</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>

        <span class="c1"># Cache response</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_response</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p><strong>Token Optimization</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">TokenOptimizer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_tokens</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">max_tokens</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tokenizer</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">optimize_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optimize prompt to reduce token usage&quot;&quot;&quot;</span>
        <span class="c1"># Remove unnecessary context</span>
        <span class="k">if</span> <span class="n">context</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="c1"># Keep only essential context</span>
            <span class="n">essential_context</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;user_intent&#39;</span><span class="p">:</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;intent&#39;</span><span class="p">),</span>
                <span class="s1">&#39;current_products&#39;</span><span class="p">:</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="p">[])[:</span><span class="mi">3</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_optimized_prompt</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">essential_context</span><span class="p">)</span>

        <span class="c1"># Truncate if still too long</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_tokens</span> <span class="o">*</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># Rough estimate</span>
            <span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">max_tokens</span> <span class="o">*</span> <span class="mi">4</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">prompt</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_optimized_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build optimized prompt with minimal context&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        Context: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;:&#39;</span><span class="p">))</span><span class="si">}</span>
<span class="s2">        Query: </span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span>
<span class="s2">        Response:&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="memory-management">
<h2>Memory Management<a class="headerlink" href="#memory-management" title="Link to this heading">¶</a></h2>
<p><strong>Memory Optimization Techniques</strong></p>
<p><strong>Object Pooling</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">weakref</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ObjectPool</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">max_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">usage_count</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">factory_func</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get object from pool or create new one&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">usage_count</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">:</span>
            <span class="c1"># Remove least used object</span>
            <span class="n">least_used</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">usage_count</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="p">[</span><span class="n">least_used</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">usage_count</span><span class="p">[</span><span class="n">least_used</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

        <span class="c1"># Create new object</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">factory_func</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">usage_count</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">obj</span>

<span class="c1"># Usage example</span>
<span class="n">search_engine_pool</span> <span class="o">=</span> <span class="n">ObjectPool</span><span class="p">(</span><span class="n">max_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_search_engine</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">search_engine_pool</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span>
        <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="k">lambda</span><span class="p">:</span> <span class="n">SearchEngine</span><span class="p">(</span><span class="n">get_config</span><span class="p">())</span>
    <span class="p">)</span>
</pre></div>
</div>
<p><strong>Garbage Collection Optimization</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">gc</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MemoryManager</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_threshold</span> <span class="o">=</span> <span class="mf">0.8</span>  <span class="c1"># 80% memory usage threshold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gc_threshold</span> <span class="o">=</span> <span class="mi">1000</span>  <span class="c1"># Objects threshold</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">monitor_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Monitor memory usage and trigger cleanup&quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">memory_percent</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span> <span class="o">/</span> <span class="mi">100</span>

            <span class="k">if</span> <span class="n">memory_percent</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_threshold</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleanup_memory</span><span class="p">()</span>

            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>  <span class="c1"># Check every minute</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cleanup_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform memory cleanup&quot;&quot;&quot;</span>
        <span class="c1"># Force garbage collection</span>
        <span class="n">collected</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

        <span class="c1"># Clear caches if needed</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;cache&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Memory cleanup completed. Collected </span><span class="si">{</span><span class="n">collected</span><span class="si">}</span><span class="s2"> objects.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Resource Management</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">contextlib</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generator</span>

<span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<span class="k">def</span><span class="w"> </span><span class="nf">resource_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Context manager for resource cleanup&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># Cleanup resources</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="c1"># Usage</span>
<span class="k">with</span> <span class="n">resource_manager</span><span class="p">():</span>
    <span class="c1"># Perform memory-intensive operations</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">perform_heavy_computation</span><span class="p">()</span>
    <span class="n">process_results</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="monitoring-and-profiling">
<h2>Monitoring and Profiling<a class="headerlink" href="#monitoring-and-profiling" title="Link to this heading">¶</a></h2>
<p><strong>Performance Monitoring</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PerformanceMetrics</span><span class="p">:</span>
    <span class="n">response_time</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">memory_usage</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">cpu_usage</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">database_queries</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">cache_hits</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">cache_misses</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PerformanceMonitor</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PerformanceMetrics</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">start_monitoring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start monitoring an operation&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">operation</span><span class="p">]</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">(</span>
            <span class="n">response_time</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
            <span class="n">memory_usage</span><span class="o">=</span><span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span><span class="p">,</span>
            <span class="n">cpu_usage</span><span class="o">=</span><span class="n">psutil</span><span class="o">.</span><span class="n">cpu_percent</span><span class="p">(),</span>
            <span class="n">database_queries</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">cache_hits</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">cache_misses</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">end_monitoring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;End monitoring and record metrics&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span>
            <span class="n">start_metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">operation</span><span class="p">]</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="n">metrics</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">(</span>
                <span class="n">response_time</span><span class="o">=</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">start_metrics</span><span class="o">.</span><span class="n">response_time</span><span class="p">,</span>
                <span class="n">memory_usage</span><span class="o">=</span><span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span><span class="p">,</span>
                <span class="n">cpu_usage</span><span class="o">=</span><span class="n">psutil</span><span class="o">.</span><span class="n">cpu_percent</span><span class="p">(),</span>
                <span class="n">database_queries</span><span class="o">=</span><span class="n">start_metrics</span><span class="o">.</span><span class="n">database_queries</span><span class="p">,</span>
                <span class="n">cache_hits</span><span class="o">=</span><span class="n">start_metrics</span><span class="o">.</span><span class="n">cache_hits</span><span class="p">,</span>
                <span class="n">cache_misses</span><span class="o">=</span><span class="n">start_metrics</span><span class="o">.</span><span class="n">cache_misses</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">record_metrics</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">metrics</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">record_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">metrics</span><span class="p">:</span> <span class="n">PerformanceMetrics</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Record performance metrics&quot;&quot;&quot;</span>
        <span class="c1"># Log metrics</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operation: </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response Time: </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">response_time</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Memory Usage: </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">memory_usage</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CPU Usage: </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">cpu_usage</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database Queries: </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">database_queries</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cache Hit Rate: </span><span class="si">{</span><span class="n">metrics</span><span class="o">.</span><span class="n">cache_hits</span><span class="o">/</span><span class="p">(</span><span class="n">metrics</span><span class="o">.</span><span class="n">cache_hits</span><span class="o">+</span><span class="n">metrics</span><span class="o">.</span><span class="n">cache_misses</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Database Performance Monitoring</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Monitor slow queries</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="n">mean_time</span><span class="p">,</span><span class="w"> </span><span class="n">calls</span><span class="p">,</span><span class="w"> </span><span class="n">total_time</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pg_stat_statements</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">mean_time</span><span class="w"> </span><span class="k">DESC</span>
<span class="k">LIMIT</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>

<span class="c1">-- Monitor table sizes</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">schemaname</span><span class="p">,</span><span class="w"> </span><span class="n">tablename</span><span class="p">,</span>
<span class="w">       </span><span class="n">pg_size_pretty</span><span class="p">(</span><span class="n">pg_total_relation_size</span><span class="p">(</span><span class="n">schemaname</span><span class="o">||</span><span class="s1">&#39;.&#39;</span><span class="o">||</span><span class="n">tablename</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">size</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pg_tables</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">schemaname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;public&#39;</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">pg_total_relation_size</span><span class="p">(</span><span class="n">schemaname</span><span class="o">||</span><span class="s1">&#39;.&#39;</span><span class="o">||</span><span class="n">tablename</span><span class="p">)</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>

<span class="c1">-- Monitor index usage</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">schemaname</span><span class="p">,</span><span class="w"> </span><span class="n">tablename</span><span class="p">,</span><span class="w"> </span><span class="n">indexname</span><span class="p">,</span><span class="w"> </span><span class="n">idx_scan</span><span class="p">,</span><span class="w"> </span><span class="n">idx_tup_read</span><span class="p">,</span><span class="w"> </span><span class="n">idx_tup_fetch</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pg_stat_user_indexes</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">idx_scan</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Application Performance Monitoring</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">def</span><span class="w"> </span><span class="nf">performance_logger</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to log function performance&quot;&quot;&quot;</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">start_memory</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">end_memory</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution Time: </span><span class="si">{</span><span class="n">end_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Memory Delta: </span><span class="si">{</span><span class="n">end_memory</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_memory</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">wrapper</span>

<span class="c1"># Usage</span>
<span class="nd">@performance_logger</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">search_products</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
    <span class="c1"># Search implementation</span>
    <span class="k">pass</span>
</pre></div>
</div>
</section>
<section id="performance-best-practices">
<h2>Performance Best Practices<a class="headerlink" href="#performance-best-practices" title="Link to this heading">¶</a></h2>
<p><strong>General Optimization Tips</strong></p>
<ol class="arabic simple">
<li><p><strong>Profile First</strong>: Always profile before optimizing</p></li>
<li><p><strong>Measure Impact</strong>: Measure the impact of optimizations</p></li>
<li><p><strong>Optimize Hot Paths</strong>: Focus on frequently executed code</p></li>
<li><p><strong>Use Appropriate Data Structures</strong>: Choose the right data structures for the task</p></li>
<li><p><strong>Avoid Premature Optimization</strong>: Don’t optimize code that doesn’t need it</p></li>
</ol>
<p><strong>Database Optimization</strong></p>
<ol class="arabic simple">
<li><p><strong>Use Indexes Wisely</strong>: Create indexes for frequently queried columns</p></li>
<li><p><strong>Optimize Queries</strong>: Use EXPLAIN ANALYZE to optimize slow queries</p></li>
<li><p><strong>Use Connection Pooling</strong>: Configure appropriate pool sizes</p></li>
<li><p><strong>Monitor Performance</strong>: Regularly monitor database performance</p></li>
</ol>
<p><strong>Caching Strategies</strong></p>
<ol class="arabic simple">
<li><p><strong>Cache Frequently Accessed Data</strong>: Cache data that is accessed frequently</p></li>
<li><p><strong>Use Appropriate TTL</strong>: Set appropriate time-to-live values</p></li>
<li><p><strong>Invalidate Cache Properly</strong>: Implement proper cache invalidation</p></li>
<li><p><strong>Monitor Cache Hit Rates</strong>: Monitor cache effectiveness</p></li>
</ol>
<p><strong>Memory Management</strong></p>
<ol class="arabic simple">
<li><p><strong>Use Object Pooling</strong>: Reuse objects when possible</p></li>
<li><p><strong>Implement Proper Cleanup</strong>: Clean up resources properly</p></li>
<li><p><strong>Monitor Memory Usage</strong>: Monitor memory usage and garbage collection</p></li>
<li><p><strong>Use Weak References</strong>: Use weak references for caches</p></li>
</ol>
<p><strong>Monitoring and Alerting</strong></p>
<ol class="arabic simple">
<li><p><strong>Set Up Monitoring</strong>: Set up comprehensive monitoring</p></li>
<li><p><strong>Define Alerts</strong>: Define alerts for performance issues</p></li>
<li><p><strong>Track Metrics</strong>: Track key performance metrics</p></li>
<li><p><strong>Regular Reviews</strong>: Regularly review performance data</p></li>
</ol>
<p>For more information about related components, see:</p>
<ul class="simple">
<li><p><span class="xref std std-doc">database_schema</span> - Database structure and models</p></li>
<li><p><span class="xref std std-doc">configuration_guide</span> - Configuration management</p></li>
<li><p><span class="xref std std-doc">testing_guide</span> - Testing strategies and procedures</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, E-commerce Chatbot Team.
      <span class="lastupdated">Last updated on July 10, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>